<div class="flex items-center justify-between mb-4">
  <h1 class="text-xl font-bold">Sucursales</h1>
  <a routerLink="/admin/branches/new" class="px-3 py-2 text-sm rounded bg-indigo-600 text-white">Nueva sucursal</a>
</div>

<div class="rounded border bg-white">
  <div *ngIf="loading" class="p-4">
    <div class="animate-pulse space-y-3">
      <div class="h-4 bg-slate-200 rounded w-1/3"></div>
      <div class="h-24 bg-slate-200 rounded"></div>
    </div>
  </div>


  <div class="overflow-x-auto" *ngIf="!loading">
    <table class="min-w-full text-sm">
      <thead class="bg-slate-100 text-slate-600">
        <tr>
          <th class="text-left p-3">CÃ³digo</th>
          <th class="text-left p-3">Nombre</th>
          <th class="text-left p-3">Ciudad</th>
          <th class="text-left p-3">Estado</th>
          <th class="text-left p-3">Activo</th>
          <th class="p-3 text-right">Acciones</th>
        </tr>
      </thead>
      <tbody>
        <tr *ngFor="let b of branches" class="border-t">
          <td class="p-3">{{ b.branch_code }}</td>
          <td class="p-3">{{ b.branch_name }}</td>
          <td class="p-3">{{ b.city || '-' }}</td>
          <td class="p-3">{{ b.state || '-' }}</td>
          <td class="p-3">
            <button class="px-2 py-1 rounded border text-xs"
                    [class.bg-green-50]="b.active"
                    (click)="toggleActive(b)">
              {{ b.active ? 'Activo' : 'Inactivo' }}
            </button>
          </td>
          <td class="p-3 text-right space-x-2">
            <a class="text-indigo-600 hover:underline" [routerLink]="['/admin/branches', b.branch_id]">Editar</a>
            <button class="text-red-600 hover:underline" (click)="delete(b.branch_id)">Eliminar</button>
          </td>
        </tr>
        <tr *ngIf="branches.length === 0">
          <td colspan="6" class="p-6 text-center text-slate-500">Sin registros</td>
        </tr>
      </tbody>
    </table>
  </div>
</div>
