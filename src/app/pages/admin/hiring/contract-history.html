<section class="max-w-5xl mx-auto">
  <!-- Header -->
  <header class="mb-6">
    <h1 class="text-3xl font-extrabold tracking-tight">Historial de contrataciones</h1>
    <p class="text-sm text-slate-500 mt-1">
      <!-- Per-user list of contracts, renewals and terminations -->
      Empleado: <span class="font-medium">{{ userName || ('ID ' + userId) }}</span>
    </p>
  </header>

  <!-- Loading -->
  <div class="rounded border bg-white" *ngIf="loading">
    <div class="p-4">
      <div class="animate-pulse space-y-3">
        <div class="h-4 bg-slate-200 rounded w-1/3"></div>
        <div class="h-24 bg-slate-200 rounded"></div>
      </div>
    </div>
  </div>

  <!-- Empty -->
  <div class="rounded border bg-white p-6 text-slate-500" *ngIf="!loading && items.length===0">
    Sin contratos registrados para este empleado.
  </div>

  <!-- Table -->
  <div class="rounded border bg-white overflow-x-auto" *ngIf="!loading && items.length">
    <table class="min-w-full text-sm">
      <thead class="bg-slate-100 text-slate-600">
        <tr>
          <th class="text-left p-3">Contrato #</th>
          <th class="text-left p-3">% Comisi√≥n</th>
          <th class="text-left p-3">Inicio</th>
          <th class="text-left p-3">Fin</th>
          <th class="text-left p-3">Estado</th>
          <th class="p-3 text-right">Acciones</th>
        </tr>
      </thead>
      <tbody>
        <tr *ngFor="let c of items" class="border-t">
          <td class="p-3">{{ c.contract_id }}</td>
          <td class="p-3">{{ c.commission_percentage }}%</td>
          <td class="p-3">{{ c.start_date }}</td>
          <td class="p-3">{{ c.end_date || '-' }}</td>
          <td class="p-3">
            <span class="px-2 py-1 text-xs rounded border" [class.bg-green-50]="c.active">{{ c.active ? 'Activo' : 'Inactivo' }}</span>
          </td>
          <td class="p-3 text-right space-x-2">
            <button class="text-indigo-600 hover:underline" (click)="renew(c)">Renovar</button>
            <button class="text-red-600 hover:underline" (click)="terminate(c)" [disabled]="!c.active">Dar de baja</button>
          </td>
        </tr>
      </tbody>
    </table>
  </div>

  <!-- Back -->
  <div class="mt-6">
    <a routerLink="/admin/users" class="text-indigo-600 hover:underline">Volver a empleados</a>
  </div>
</section>
